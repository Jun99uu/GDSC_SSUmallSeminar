# MSA(MicroService Architecture)  

### 넷플릭스, 아마존, 우버 기업의 공통된 특징은?

- AGILE(애자일) → 사람들의 피드백을 빠르게 반영
- 서비스를 변경하는 빈도가 매우 잦다
- 서비스를 배포하는 빈도가 굉장히 많다
- 어떻게 했길래 배포를 자주, 빠르게 할 수 있었을까?

### 가장 큰 변화는 **클라우드 인프라**의 등장!
- 인프라는 애플리케이션이 실행되는 환경 (서버, 네트워크, OS, 저장장치 등)
- 과거의 인프라 구축은 많은 시간이 소요됨
- 클라우드 인프라는
    - 원하는 만큼, 필요할 때 제공
        - GCP, Azure, AWS
        - 비즈니스 민첩성이 빨라짐  
    - 클라우드 환경에서 사용자가 폭증한다면?
        - 유연하게 리소스 확장 가능
        - Scale up (수직 확장) : (질적으로) RAM, CPU의 사양을 높이는 것
        - Scale Out (수평 확장) : (양적으로) RAM 개수를 늘리기  
    - 현실: 시스템의 일부 기능에만 사용자가 몰림

        → 사용자가 몰리는 기능과 몰리지 않는 기능을 구분하지 않고,
        리소스를 한꺼번에 모두 증가시키는 것은 효율적이지 않음

    - 가능한 방법

        → 몰리는 일부 리소스만 확장시키는 것이 가장 효율적

        **시스템은 한 덩어리가 아닌 일부만 변경되도록, 조각으로 구성되는 것이 바람직하다!**


### 모노리스
(+ 인터스텔라에 나오는 굴러다니는 로봇)
- 애플리케이션이 한 덩어리로 구성
- 한꺼번에 수정, 배포되어야 함
- 단일 프로세스에서 실행
- 모노리스를 클라우드 서비스에 적용한다면 Scale out의 대상은 모노리스 전체가 됨!
- 변경 시, 전체를 다시 빌드, 테스트 해야 함
- 확장 시, 전체를 확장해야해서 비효율적  

### MSA
- 애플리케이션이 여러 개의 서비스 조각으로 구성
- 서비스는 각기 독립적인 기능 제공
- 독립적인 수정 가능하고, 별도 배포와 확장 가능
- 여러 개의 작은 서비스 집합으로 개발
- (서비스간에는) HTTP API 같은 가벼운 수단을 사용하여 통신
- 각 서비스는 다른 언어, 다른 DB 사용 가능
- 은총알은 없다!
    - 완벽한 해결책은 아님
    - 각 마이크로서비스 자체는 단순, BUT 시스템 전체적으로는 부품이 늘어남
    - 서비스가 나누어지므로, 서비스간 통신 구현이 필요함
        - 서비스간 통신이 계속 늘어나면 답없음 (동기 처리는 말도 안됨)
    - 그 외 해야할 것이 매우 많음 (모노리스에 비해)  

 ### MSA로의 변환
- 비즈니스 민첩성을 높이기 위해서는,
    **아키텍처 변화 뿐만 아니라 여러 요소들의 동반적인 변화가 필요**
    - 조직
    - 인프라
    - 자동화
    - 개발 프로세스
    - 개발 문화
    - 설계 방식 : 데이터 중복을 허용, 결과적 일관성 추구
